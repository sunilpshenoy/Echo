/*! For license information please see main.f57bfca9.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),a=n(853);function l(e){for(var t="https://c07a86aa-98c0-40e6-a6c6-f5e5eb384e98.preview.emergentagent.com",It="".concat(Mt,"/api"),Bt=new MicRecorder({bitRate:128});const Vt=function(){var e,t,n,r,l,o;const[s,i]=(0,a.useState)("login"),[c,d]=(0,a.useState)(null),[f,p]=(0,a.useState)(localStorage.getItem("token")),[m,h]=(0,a.useState)([]),[g,b]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[x,w]=(0,a.useState)(""),[k,N]=(0,a.useState)([]),[j,S]=(0,a.useState)(null),[C,_]=(0,a.useState)(!1),E=(0,a.useRef)(null),P=(0,a.useRef)(null),[R,T]=((0,a.useRef)(null),(0,a.useState)({email:"",password:""})),[O,z]=(0,a.useState)({username:"",email:"",password:"",phone:"",display_name:""}),[L,D]=(0,a.useState)(""),[F,A]=(0,a.useState)([]),[U,M]=(0,a.useState)(!1),[I,B]=(0,a.useState)({email:"",contact_name:""}),[V,q]=(0,a.useState)(!1),[H,W]=(0,a.useState)({name:"",description:"",members:[],chat_type:"group"}),[$,Q]=(0,a.useState)([]),[K,G]=(0,a.useState)(!1),[J,Y]=(0,a.useState)(!1),[X,Z]=(0,a.useState)([]),[ee,te]=(0,a.useState)(!1),[ne,re]=(0,a.useState)(!1),[ae,le]=(0,a.useState)({user_id:"",reason:"",description:"",message_id:null,chat_id:null}),[oe,se]=(0,a.useState)(!1),[ie,ce]=(0,a.useState)({fontFamily:"Inter",fontSize:"medium",backgroundColor:"white",primaryColor:"#25D366",textColor:"black",userNameColor:"#128C7E",theme:"light"}),[ue,de]=(0,a.useState)(!1),[fe,pe]=(0,a.useState)(!1),[me,he]=(0,a.useState)(!1),[ge,be]=(0,a.useState)(!1),[ye,ve]=(0,a.useState)(0),[xe,we]=(0,a.useState)(null),[ke,Ne]=(0,a.useState)(null),[je,Se]=(0,a.useState)("idle"),[Ce,_e]=(0,a.useState)([]),[Ee,Pe]=(0,a.useState)(null),[Re,Te]=(0,a.useState)(null),[Oe,ze]=(0,a.useState)(""),[Le,De]=(0,a.useState)([]),[Fe,Ae]=(0,a.useState)(!1),[Ue,Me]=(0,a.useState)({content:"",media_type:"text",background_color:"#000000",text_color:"#ffffff",privacy:"all"}),[Ie,Be]=(0,a.useState)(null),[Ve,qe]=(0,a.useState)([]),[He,We]=(0,a.useState)(!1),[$e,Qe]=(0,a.useState)({name:"",description:"",is_public:!0,category:"general"}),[Ke,Ge]=(0,a.useState)([]),[Je,Ye]=(0,a.useState)(null),[Xe,Ze]=(0,a.useState)(!1),[et,tt]=(0,a.useState)({name:"",description:"",max_participants:50}),[nt,rt]=(0,a.useState)([]),[at,lt]=(0,a.useState)([]),[ot,st]=(0,a.useState)(!1),[it,ct]=(0,a.useState)("users"),[ut,dt]=(0,a.useState)(!1),[ft,pt]=(0,a.useState)({profile_photo:"everyone",last_seen:"everyone",phone_number:"contacts",read_receipts:!0,typing_indicators:!0}),[mt,ht]=(0,a.useState)(!1),[gt,bt]=(0,a.useState)(null),[yt,vt]=(0,a.useState)(null),[xt,wt]=(0,a.useState)(!1),[kt,Nt]=(0,a.useState)([]),[jt,St]=(0,a.useState)({activity_status:"online",custom_status:"",game_activity:""}),[Ct,_t]=(0,a.useState)({bio:"",location:"",website:"",interests:[],languages:[]}),[Et,Pt]=(0,a.useState)(!1),[Rt,Tt]=(0,a.useState)(!1),[Ot,zt]=(0,a.useState)({question:"",options:["",""],is_anonymous:!1,allows_multiple_answers:!1,expires_in_hours:null}),[Ft,At]=(0,a.useState)("personal"),[Vt,qt]=(0,a.useState)(!1),[Ht,Wt]=(0,a.useState)(!1),[$t,Qt]=(0,a.useState)(!1),[Kt,Gt]=(0,a.useState)(!1),[Jt,Yt]=(0,a.useState)(!1),[Xt,Zt]=(0,a.useState)(!1),[en,tn]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=localStorage.getItem("chatapp-custom-settings");if(e){const t=JSON.parse(e);ce(t);const n=document.documentElement;n.style.setProperty("--font-family",t.fontFamily),n.style.setProperty("--font-size","small"===t.fontSize?"12px":"large"===t.fontSize?"16px":"xl"===t.fontSize?"18px":"14px"),n.style.setProperty("--bg-color",t.backgroundColor),n.style.setProperty("--primary-color",t.primaryColor),n.style.setProperty("--text-color",t.textColor),n.style.setProperty("--username-color",t.userNameColor),"dark"===t.theme&&document.body.setAttribute("data-theme","dark")}}),[]),(0,a.useEffect)((()=>{if(c&&!j){const e=Mt.replace("https:","wss:").replace("http:","ws:"),t=new WebSocket("".concat(e,"/api/ws/").concat(c.user_id));t.onopen=()=>{console.log("WebSocket connected"),_(!0),t.send(JSON.stringify({type:"user_status",status:jt.activity_status,activity:jt.custom_status,game:jt.game_activity}))},t.onmessage=e=>{const t=JSON.parse(e.data);switch(console.log("WebSocket message:",t),t.type){case"new_message":v((e=>[...e,t.data])),on();break;case"message_read":v((e=>e.map((e=>e.message_id===t.data.message_id?u(u({},e),{},{read_status:"read"}):e))));break;case"message_reaction":v((e=>e.map((e=>e.message_id===t.data.message_id?u(u({},e),{},{reactions:t.data.reactions}):e))));break;case"message_edited":v((e=>e.map((e=>e.message_id===t.data.message_id?u(u({},e),{},{content:t.data.new_content,edited_at:t.data.edited_at}):e))));break;case"message_deleted":v((e=>e.map((e=>e.message_id===t.data.message_id?u(u({},e),{},{is_deleted:!0,content:"[This message was deleted]"}):e))));break;case"typing_status":_e(t.data.typing_users.filter((e=>e!==c.user_id)));break;case"incoming_call":pe(!0),Se("incoming");break;case"user_joined_voice":fn();break;case"status_update":console.log("Status update:",t.data);break;case"screen_share_toggle":console.log("Screen share toggled:",t.data)}},t.onclose=()=>{console.log("WebSocket disconnected"),_(!1)},t.onerror=e=>{console.error("WebSocket error:",e)},S(t)}return()=>{j&&j.close()}}),[c]),(0,a.useEffect)((()=>{nn()}),[y]),(0,a.useEffect)((()=>{let e;return ge?e=setInterval((()=>{ve((e=>e+1))}),1e3):ve(0),()=>clearInterval(e)}),[ge]),(0,a.useEffect)((()=>{if(x&&g&&j){j.send(JSON.stringify({type:"typing",chat_id:g.chat_id,is_typing:!0}));const e=setTimeout((()=>{j.send(JSON.stringify({type:"typing",chat_id:g.chat_id,is_typing:!1}))}),2e3);return()=>clearTimeout(e)}}),[x,g,j]);const nn=()=>{var e;null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},rn=async e=>{e.preventDefault();try{const e=await Lt.post("".concat(It,"/login"),R),{access_token:t,user:n}=e.data;p(t),d(n),pt(n.privacy_settings||ft),localStorage.setItem("token",t),i("chat"),setTimeout((()=>{on(t),sn(t),cn(t),un(t),dn(t),fn(t)}),100)}catch(r){var t,n;console.error("Login error:",r),alert("Login failed: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},an=async e=>{e.preventDefault();try{const e=await Lt.post("".concat(It,"/register"),O),{access_token:t,user:n}=e.data;p(t),d(n),localStorage.setItem("token",t),i("chat"),n.backup_phrase&&alert("IMPORTANT: Save your backup phrase securely:\n\n".concat(n.backup_phrase,"\n\nThis phrase can recover your account if you lose access.")),setTimeout((()=>{on(t),sn(t),cn(t),un(t),dn(t),fn(t)}),100)}catch(r){var t,n;console.error("Registration error:",r),alert("Registration failed: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},ln=function(){return{headers:{Authorization:"Bearer ".concat((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||f)}}},on=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await Lt.get("".concat(It,"/chats"),ln(e));h(t.data)}catch(t){console.error("Error fetching chats:",t)}},sn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await Lt.get("".concat(It,"/contacts"),ln(e));N(t.data)}catch(t){console.error("Error fetching contacts:",t)}},cn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await Lt.get("".concat(It,"/users/blocked"),ln(e));Z(t.data)}catch(t){console.error("Error fetching blocked users:",t)}},un=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await Lt.get("".concat(It,"/stories"),ln(e));De(t.data)}catch(t){console.error("Error fetching stories:",t)}},dn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await Lt.get("".concat(It,"/channels"),ln(e));qe(t.data)}catch(t){console.error("Error fetching channels:",t)}},fn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=await Lt.get("".concat(It,"/voice/rooms"),ln(e));Ge(t.data)}catch(t){console.error("Error fetching voice rooms:",t)}},pn=async e=>{try{await Lt.post("".concat(It,"/messages/read"),{message_ids:e},ln())}catch(t){console.error("Error marking messages as read:",t)}},mn=async(e,t)=>{try{await Lt.put("".concat(It,"/messages/edit"),{message_id:e,new_content:t},ln()),Te(null),ze("")}catch(n){console.error("Error editing message:",n)}},hn=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voice";try{await Lt.post("".concat(It,"/calls/initiate"),{chat_id:g.chat_id,call_type:e,screen_sharing:!1},ln());Se("calling"),"video"===e?he(!0):pe(!0);const t=await navigator.mediaDevices.getUserMedia({video:"video"===e,audio:!0});Ne(t);const n=new Peer({initiator:!0,trickle:!1,stream:t});we(n)}catch(t){console.error("Error initiating call:",t)}},gn=async()=>{try{await Lt.post("".concat(It,"/polls"),u(u({},Ot),{},{chat_id:g.chat_id}),ln()),Tt(!1),zt({question:"",options:["",""],is_anonymous:!1,allows_multiple_answers:!1,expires_in_hours:null})}catch(e){console.error("Error creating poll:",e)}},bn=e=>{b(e),(async e=>{try{const t=await Lt.get("".concat(It,"/chats/").concat(e,"/messages"),ln());v(t.data);const n=t.data.filter((e=>e.sender_id!==c.user_id&&"unread"===e.read_status));n.length>0&&pn(n.map((e=>e.message_id)))}catch(t){console.error("Error fetching messages:",t)}})(e.chat_id)},yn=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),vn=e=>e.sender_id!==c.user_id?null:"read"===e.read_status?(0,Dt.jsx)("span",{className:"text-blue-400 ml-1",children:"\u2713\u2713"}):(0,Dt.jsx)("span",{className:"text-gray-400 ml-1",children:"\u2713\u2713"});return"login"===s?(0,Dt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4",children:(0,Dt.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl p-8 w-full max-w-md border border-white/20",children:[(0,Dt.jsxs)("div",{className:"text-center mb-8",children:[(0,Dt.jsx)("div",{className:"text-8xl mb-4",children:"\ud83d\ude80"}),(0,Dt.jsxs)("h1",{className:"text-4xl font-bold text-white mb-2",children:["ChatApp Pro",(0,Dt.jsx)("span",{className:"text-2xl ml-2",children:"Ultimate"})]}),(0,Dt.jsx)("p",{className:"text-gray-200",children:"The Ultimate Communication Platform"}),(0,Dt.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mt-3 text-xs text-gray-300",children:[(0,Dt.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full",children:"\ud83d\udd12 Encryption"}),(0,Dt.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full",children:"\ud83d\udcde Calls"}),(0,Dt.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full",children:"\ud83d\udcd6 Stories"}),(0,Dt.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full",children:"\ud83d\udce2 Channels"}),(0,Dt.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full",children:"\ud83c\udfa4 Voice Rooms"}),(0,Dt.jsx)("span",{className:"bg-white/20 px-2 py-1 rounded-full",children:"\ud83d\udd0d Discovery"})]})]}),(0,Dt.jsxs)("div",{className:"flex mb-6",children:[(0,Dt.jsx)("button",{onClick:()=>i("login"),className:"flex-1 py-3 px-4 rounded-l-xl font-medium transition-all ".concat("login"===s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-white/20 text-gray-200 hover:bg-white/30"),children:"Login"}),(0,Dt.jsx)("button",{onClick:()=>i("register"),className:"flex-1 py-3 px-4 rounded-r-xl font-medium transition-all ".concat("register"===s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-white/20 text-gray-200 hover:bg-white/30"),children:"Register"})]}),(0,Dt.jsxs)("form",{onSubmit:rn,className:"space-y-4",children:[(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"email",placeholder:"Email",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:R.email,onChange:e=>T(u(u({},R),{},{email:e.target.value})),required:!0})}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"password",placeholder:"Password",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:R.password,onChange:e=>T(u(u({},R),{},{password:e.target.value})),required:!0})}),(0,Dt.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white py-4 rounded-xl font-medium hover:shadow-2xl hover:scale-105 transition-all duration-300",children:"\ud83d\ude80 Launch ChatApp Pro"})]})]})}):"register"===s?(0,Dt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 flex items-center justify-center p-4",children:(0,Dt.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl p-8 w-full max-w-md border border-white/20",children:[(0,Dt.jsxs)("div",{className:"text-center mb-8",children:[(0,Dt.jsx)("div",{className:"text-8xl mb-4",children:"\ud83d\ude80"}),(0,Dt.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Join ChatApp Pro"}),(0,Dt.jsx)("p",{className:"text-gray-200",children:"Create your ultimate account"})]}),(0,Dt.jsxs)("div",{className:"flex mb-6",children:[(0,Dt.jsx)("button",{onClick:()=>i("login"),className:"flex-1 py-3 px-4 rounded-l-xl font-medium transition-all ".concat("login"===s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-white/20 text-gray-200 hover:bg-white/30"),children:"Login"}),(0,Dt.jsx)("button",{onClick:()=>i("register"),className:"flex-1 py-3 px-4 rounded-r-xl font-medium transition-all ".concat("register"===s?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-white/20 text-gray-200 hover:bg-white/30"),children:"Register"})]}),(0,Dt.jsxs)("form",{onSubmit:an,className:"space-y-4",children:[(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"text",placeholder:"Username",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:O.username,onChange:e=>z(u(u({},O),{},{username:e.target.value})),required:!0})}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"text",placeholder:"Display Name (optional)",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:O.display_name,onChange:e=>z(u(u({},O),{},{display_name:e.target.value}))})}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"email",placeholder:"Email",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:O.email,onChange:e=>z(u(u({},O),{},{email:e.target.value})),required:!0})}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"tel",placeholder:"Phone (optional)",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:O.phone,onChange:e=>z(u(u({},O),{},{phone:e.target.value}))})}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("input",{type:"password",placeholder:"Password",className:"w-full p-4 bg-white/20 border border-white/30 rounded-xl text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/30 transition-all",value:O.password,onChange:e=>z(u(u({},O),{},{password:e.target.value})),required:!0})}),(0,Dt.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white py-4 rounded-xl font-medium hover:shadow-2xl hover:scale-105 transition-all duration-300",children:"\ud83d\ude80 Create Ultimate Account"})]})]})}):(0,Dt.jsxs)("div",{className:"h-screen flex bg-gray-100",children:[(0,Dt.jsxs)("div",{className:"w-1/3 bg-white border-r border-gray-200 flex flex-col shadow-sm",children:[(0,Dt.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,Dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsxs)("div",{className:"relative",children:[(0,Dt.jsx)("div",{className:"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center",children:(0,Dt.jsx)("span",{className:"font-medium text-lg text-gray-700",children:c.username.charAt(0).toUpperCase()})}),(0,Dt.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),(0,Dt.jsxs)("div",{className:"ml-3",children:[(0,Dt.jsx)("p",{className:"font-medium text-lg text-gray-900",children:c.display_name||c.username}),(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:C?"Online":"Connecting..."})]})]}),(0,Dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Dt.jsx)("button",{onClick:()=>st(!ot),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-all",title:"Discover",children:"\ud83d\udd0d"}),(0,Dt.jsx)("button",{onClick:()=>dt(!ut),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-all",title:"Privacy",children:"\ud83d\udee1\ufe0f"}),(0,Dt.jsx)("button",{onClick:()=>wt(!xt),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-all",title:"Backup",children:"\ud83d\udcbe"}),(0,Dt.jsx)("button",{onClick:()=>Pt(!Et),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-all",title:"Profile",children:"\ud83d\udc64"}),(0,Dt.jsx)("button",{onClick:()=>se(!oe),className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-all",title:"Customize",children:"\ud83c\udfa8"}),(0,Dt.jsx)("button",{onClick:()=>{p(null),d(null),h([]),b(null),v([]),N([]),Z([]),De([]),qe([]),Ge([]),localStorage.removeItem("token"),j&&(j.close(),S(null)),ke&&ke.getTracks().forEach((e=>e.stop())),en&&en.getTracks().forEach((e=>e.stop())),i("login")},className:"text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100 transition-all",title:"Logout",children:(0,Dt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),Le.length>0&&(0,Dt.jsxs)("div",{className:"p-4 border-b border-white/10",children:[(0,Dt.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,Dt.jsx)("span",{className:"text-sm font-semibold text-white/80",children:"\u2728 Stories"}),(0,Dt.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-pink-400 to-purple-400 rounded-full animate-pulse"})]}),(0,Dt.jsx)("div",{className:"flex space-x-4 overflow-x-auto scrollbar-hide",children:Le.map((e=>(0,Dt.jsxs)("div",{className:"flex-shrink-0 text-center cursor-pointer group",onClick:()=>Be(e),children:[(0,Dt.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full p-0.5 group-hover:scale-110 transition-transform",children:(0,Dt.jsx)("div",{className:"w-full h-full bg-gray-300 rounded-full flex items-center justify-center text-white font-bold",children:e.user.username.charAt(0).toUpperCase()})}),(0,Dt.jsx)("p",{className:"text-xs mt-1 truncate w-14 font-medium",children:e.user.username})]},e.user.user_id)))})]}),Ke.length>0&&(0,Dt.jsxs)("div",{className:"p-3 border-b border-gray-200/50",children:[(0,Dt.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83c\udfa4 Active Voice Rooms"}),(0,Dt.jsx)("div",{className:"space-y-2",children:Ke.slice(0,3).map((e=>(0,Dt.jsx)("div",{className:"p-2 rounded-lg cursor-pointer transition-all ".concat(Je===e.room_id?"bg-green-100 border border-green-300":"bg-gray-50 hover:bg-gray-100"),onClick:()=>(async e=>{try{await Lt.post("".concat(It,"/voice/rooms/").concat(e,"/join"),{},ln()),Ye(e),j&&j.send(JSON.stringify({type:"join_voice_room",room_id:e}))}catch(t){console.error("Error joining voice room:",t)}})(e.room_id),children:(0,Dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,Dt.jsxs)("p",{className:"text-xs text-gray-500",children:[e.participant_count,"/",e.max_participants," users"]})]}),(0,Dt.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})},e.room_id)))})]}),(0,Dt.jsx)("div",{className:"p-3",children:(0,Dt.jsx)("input",{type:"text",placeholder:"Search everything... \ud83d\udd0d",className:"w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white/50 backdrop-blur-sm",value:L,onChange:e=>{D(e.target.value)}})}),(0,Dt.jsxs)("div",{className:"px-3 pb-3 grid grid-cols-3 gap-2",children:[(0,Dt.jsxs)("button",{onClick:()=>M(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white py-2 rounded-lg text-xs hover:shadow-lg transition-all flex flex-col items-center",children:[(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83d\udc65"}),(0,Dt.jsx)("span",{children:"Add"})]}),(0,Dt.jsxs)("button",{onClick:()=>q(!0),className:"bg-gradient-to-r from-purple-500 to-violet-500 text-white py-2 rounded-lg text-xs hover:shadow-lg transition-all flex flex-col items-center",children:[(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"}),(0,Dt.jsx)("span",{children:"Group"})]}),(0,Dt.jsxs)("button",{onClick:()=>We(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white py-2 rounded-lg text-xs hover:shadow-lg transition-all flex flex-col items-center",children:[(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83d\udce2"}),(0,Dt.jsx)("span",{children:"Channel"})]}),(0,Dt.jsxs)("button",{onClick:()=>Ae(!0),className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white py-2 rounded-lg text-xs hover:shadow-lg transition-all flex flex-col items-center",children:[(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83d\udcd6"}),(0,Dt.jsx)("span",{children:"Story"})]}),(0,Dt.jsxs)("button",{onClick:()=>Ze(!0),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 rounded-lg text-xs hover:shadow-lg transition-all flex flex-col items-center",children:[(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83c\udfa4"}),(0,Dt.jsx)("span",{children:"Voice"})]}),(0,Dt.jsxs)("button",{onClick:()=>Tt(!0),className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white py-2 rounded-lg text-xs hover:shadow-lg transition-all flex flex-col items-center",children:[(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83d\udcca"}),(0,Dt.jsx)("span",{children:"Poll"})]})]}),(0,Dt.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===m.length?(0,Dt.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,Dt.jsx)("div",{className:"text-8xl mb-4",children:"\ud83d\ude80"}),(0,Dt.jsx)("p",{className:"font-medium text-lg mb-2",children:"Welcome to ChatApp Pro Ultimate!"}),(0,Dt.jsx)("p",{className:"text-sm",children:"Create your first chat, story, channel, or voice room"}),(0,Dt.jsxs)("div",{className:"mt-4 text-xs space-y-1",children:[(0,Dt.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Dt.jsx)("span",{className:"mr-2",children:"\ud83d\udd12"}),(0,Dt.jsx)("span",{children:"End-to-end encryption"})]}),(0,Dt.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Dt.jsx)("span",{className:"mr-2",children:"\ud83c\udfa5"}),(0,Dt.jsx)("span",{children:"Video calls & screen sharing"})]}),(0,Dt.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Dt.jsx)("span",{className:"mr-2",children:"\ud83c\udf10"}),(0,Dt.jsx)("span",{children:"Global discovery & channels"})]})]})]}):m.map((e=>{var t,n,r,a,l,o,s;return(0,Dt.jsx)("div",{className:"p-4 border-b border-gray-100/50 cursor-pointer transition-all duration-200 ".concat((null===g||void 0===g?void 0:g.chat_id)===e.chat_id?"bg-gradient-to-r from-purple-100 to-blue-100 border-purple-200 shadow-lg":"hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50"),onClick:()=>bn(e),children:(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsxs)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-400 to-purple-400 rounded-full flex items-center justify-center relative shadow-lg",children:[(0,Dt.jsx)("span",{className:"text-white font-medium text-lg",children:"direct"===e.chat_type?(null===(t=e.other_user)||void 0===t||null===(n=t.username)||void 0===n?void 0:n.charAt(0).toUpperCase())||"?":(null===(r=e.name)||void 0===r?void 0:r.charAt(0).toUpperCase())||"G"}),(null===(a=e.other_user)||void 0===a?void 0:a.is_online)&&(0,Dt.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white animate-pulse"})]}),(0,Dt.jsxs)("div",{className:"ml-4 flex-1",children:[(0,Dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Dt.jsx)("p",{className:"font-medium text-gray-800",children:"direct"===e.chat_type?(null===(l=e.other_user)||void 0===l?void 0:l.username)||"Unknown User":e.name}),e.last_message&&(0,Dt.jsx)("span",{className:"text-xs text-gray-500",children:yn(e.last_message.timestamp)})]}),e.last_message&&(0,Dt.jsxs)("p",{className:"text-sm text-gray-600 truncate",children:["\ud83d\udd12 ",e.last_message.content]}),Ce.length>0&&(null===g||void 0===g?void 0:g.chat_id)===e.chat_id&&(0,Dt.jsxs)("div",{className:"flex items-center mt-1",children:[(0,Dt.jsxs)("div",{className:"flex space-x-1",children:[(0,Dt.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),(0,Dt.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Dt.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,Dt.jsx)("p",{className:"text-xs text-purple-500 italic ml-2",children:"typing..."})]}),(0,Dt.jsxs)("div",{className:"flex items-center justify-between mt-1",children:["direct"===e.chat_type&&(null===(o=e.other_user)||void 0===o?void 0:o.is_online)&&(0,Dt.jsx)("span",{className:"text-xs text-green-500 font-medium",children:"\u25cf Online"}),"group"===e.chat_type&&(0,Dt.jsxs)("span",{className:"text-xs text-gray-500",children:["\ud83d\udc65 ",(null===(s=e.members)||void 0===s?void 0:s.length)||0," members"]}),"channel"===e.chat_type&&(0,Dt.jsx)("span",{className:"text-xs text-blue-500",children:"\ud83d\udce2 Channel"})]})]})]})},e.chat_id)}))})]}),(0,Dt.jsx)("div",{className:"flex-1 flex flex-col",children:g?(0,Dt.jsxs)(Dt.Fragment,{children:[(0,Dt.jsx)("div",{className:"p-4 bg-white/80 backdrop-blur-lg border-b border-gray-200/50 shadow-sm",children:(0,Dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-400 rounded-full flex items-center justify-center shadow-lg",children:(0,Dt.jsx)("span",{className:"text-white font-medium",children:"direct"===g.chat_type?(null===(e=g.other_user)||void 0===e||null===(t=e.username)||void 0===t?void 0:t.charAt(0).toUpperCase())||"?":(null===(n=g.name)||void 0===n?void 0:n.charAt(0).toUpperCase())||"G"})}),(0,Dt.jsxs)("div",{className:"ml-4",children:[(0,Dt.jsxs)("p",{className:"font-medium text-lg flex items-center",children:["direct"===g.chat_type?(null===(r=g.other_user)||void 0===r?void 0:r.username)||"Unknown User":g.name,(0,Dt.jsx)("span",{className:"ml-2 text-purple-500",children:"\ud83d\ude80"})]}),(0,Dt.jsxs)("p",{className:"text-sm text-gray-500",children:["direct"===g.chat_type&&(null===(l=g.other_user)||void 0===l?void 0:l.is_online)&&(0,Dt.jsx)("span",{className:"text-green-500",children:"\u25cf Online"}),"group"===g.chat_type&&(0,Dt.jsxs)("span",{children:["\ud83d\udc65 ",(null===(o=g.members)||void 0===o?void 0:o.length)||0," members"]}),(0,Dt.jsx)("span",{className:"ml-2",children:"\u2022 End-to-end encrypted \u2022 Ultimate Security"})]})]})]}),(0,Dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Dt.jsx)("button",{onClick:()=>hn("voice"),className:"p-3 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-xl transition-all hover:scale-110",title:"Voice Call",children:(0,Dt.jsx)("span",{className:"text-xl",children:"\ud83d\udcde"})}),(0,Dt.jsx)("button",{onClick:()=>hn("video"),className:"p-3 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all hover:scale-110",title:"Video Call",children:(0,Dt.jsx)("span",{className:"text-xl",children:"\ud83d\udcf9"})}),(0,Dt.jsx)("button",{onClick:Xt?async()=>{en&&(en.getTracks().forEach((e=>e.stop())),tn(null),Zt(!1),g&&await Lt.post("".concat(It,"/calls/").concat(g.call_id,"/screen-share"),{enable:!1},ln()))}:async()=>{try{const e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});tn(e),Zt(!0),g&&await Lt.post("".concat(It,"/calls/").concat(g.call_id,"/screen-share"),{enable:!0},ln())}catch(e){console.error("Error starting screen share:",e)}},className:"p-3 rounded-xl transition-all hover:scale-110 ".concat(Xt?"text-red-600 bg-red-50":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"),title:Xt?"Stop Screen Share":"Start Screen Share",children:(0,Dt.jsx)("span",{className:"text-xl",children:"\ud83d\udda5\ufe0f"})}),(0,Dt.jsx)("button",{onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},className:"p-3 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded-xl transition-all hover:scale-110",title:"Attach File",children:(0,Dt.jsx)("span",{className:"text-xl",children:"\ud83d\udcce"})}),"direct"===g.chat_type&&(0,Dt.jsx)("button",{onClick:()=>{var e;return(async e=>{try{const t=await Lt.get("".concat(It,"/safety/number/").concat(e),ln());bt(t.data),vt(e),ht(!0)}catch(t){console.error("Error getting safety number:",t)}})(null===(e=g.other_user)||void 0===e?void 0:e.user_id)},className:"p-3 text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all hover:scale-110",title:"Safety Number",children:(0,Dt.jsx)("span",{className:"text-xl",children:"\ud83d\udee1\ufe0f"})}),(0,Dt.jsx)("input",{ref:P,type:"file",hidden:!0,onChange:e=>{var t;null!==(t=e.target.files)&&void 0!==t&&t[0]}})]})]})}),(0,Dt.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-gray-50/50 to-white/50 backdrop-blur-sm",children:[Ee&&(0,Dt.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200 mb-4 backdrop-blur-sm",children:(0,Dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"\u21a9\ufe0f Replying to:"}),(0,Dt.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:Ee.content})]}),(0,Dt.jsx)("button",{onClick:()=>Pe(null),className:"text-gray-400 hover:text-gray-600 text-xl",children:"\u2715"})]})}),Xt&&(0,Dt.jsx)("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 p-4 rounded-xl border border-purple-200 mb-4",children:(0,Dt.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Dt.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udda5\ufe0f"}),(0,Dt.jsx)("p",{className:"text-purple-700 font-medium",children:"You are sharing your screen"})]})}),y.map((e=>{const t=Re===e.message_id;return(0,Dt.jsx)("div",{className:"flex ".concat(e.sender_id===c.user_id?"justify-end":"justify-start"," group mb-4"),children:(0,Dt.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl relative ".concat(e.sender_id===c.user_id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white":"bg-white text-gray-800 shadow-lg border"," ").concat(e.is_deleted?"opacity-50 italic":""),children:[e.reply_to&&(0,Dt.jsx)("div",{className:"text-xs opacity-75 border-l-2 border-current pl-2 mb-2",children:(0,Dt.jsx)("span",{className:"text-xs",children:"\u21a9\ufe0f Replying to previous message"})}),e.sender_id!==c.user_id&&"group"===(null===g||void 0===g?void 0:g.chat_type)&&(0,Dt.jsx)("p",{className:"text-xs font-medium mb-1 opacity-75",children:e.sender_name}),t?(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("input",{type:"text",value:Oe,onChange:e=>ze(e.target.value),className:"w-full bg-transparent border-b text-current p-1",onKeyPress:t=>{"Enter"===t.key&&mn(e.message_id,Oe)},autoFocus:!0}),(0,Dt.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,Dt.jsx)("button",{onClick:()=>mn(e.message_id,Oe),className:"text-xs px-2 py-1 bg-green-500 text-white rounded",children:"Save"}),(0,Dt.jsx)("button",{onClick:()=>{Te(null),ze("")},className:"text-xs px-2 py-1 bg-red-500 text-white rounded",children:"Cancel"})]})]}):(0,Dt.jsxs)(Dt.Fragment,{children:["voice"===e.message_type?(0,Dt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Dt.jsx)("div",{className:"w-8 h-8 bg-current bg-opacity-20 rounded-full flex items-center justify-center",children:(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83c\udfa4"})}),(0,Dt.jsxs)("div",{className:"flex-1",children:[(0,Dt.jsx)("p",{className:"font-medium",children:"Voice message"}),(0,Dt.jsxs)("p",{className:"text-xs opacity-75",children:[e.voice_duration,"s"]}),e.file_data&&(0,Dt.jsx)("audio",{controls:!0,className:"mt-2 w-full",children:(0,Dt.jsx)("source",{src:"data:audio/mp3;base64,".concat(e.file_data),type:"audio/mp3"})})]})]}):"image"===e.message_type&&e.file_data?(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.file_data),alt:e.file_name,className:"max-w-full max-h-64 rounded-lg cursor-pointer transition-transform hover:scale-105",onClick:()=>window.open("data:image/jpeg;base64,".concat(e.file_data),"_blank")}),e.content&&(0,Dt.jsx)("p",{className:"mt-2",children:e.content})]}):"file"===e.message_type?(0,Dt.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-current bg-opacity-10 rounded-lg",children:[(0,Dt.jsx)("span",{className:"text-2xl",children:"\ud83d\udcce"}),(0,Dt.jsxs)("div",{className:"flex-1",children:[(0,Dt.jsx)("p",{className:"font-medium",children:e.file_name}),(0,Dt.jsx)("p",{className:"text-xs opacity-75",children:e.file_size?"".concat((e.file_size/1024).toFixed(1)," KB"):"File"})]})]}):(0,Dt.jsx)("p",{className:"leading-relaxed",children:e.content}),e.reactions&&Object.keys(e.reactions).length>0&&(0,Dt.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:Object.entries(e.reactions).map((t=>{let[n,r]=t;return(0,Dt.jsxs)("button",{onClick:()=>(async(e,t)=>{try{await Lt.post("".concat(It,"/messages/react"),{message_id:e,emoji:t},ln())}catch(n){console.error("Error reacting to message:",n)}})(e.message_id,n),className:"px-2 py-1 rounded-full text-xs flex items-center space-x-1 transition-all hover:scale-110 ".concat(r.includes(c.user_id)?"bg-blue-100 text-blue-800 border border-blue-300":"bg-gray-100 text-gray-600 border border-gray-300"),children:[(0,Dt.jsx)("span",{children:n}),(0,Dt.jsx)("span",{className:"font-medium",children:r.length})]},n)}))}),(0,Dt.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 absolute -right-2 -top-2 flex space-x-1 transition-opacity",children:[(0,Dt.jsx)("button",{onClick:()=>de(e.message_id),className:"bg-gray-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-xs hover:bg-gray-700 transition-colors",title:"React",children:"\ud83d\ude0a"}),(0,Dt.jsx)("button",{onClick:()=>Pe(e),className:"bg-blue-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-xs hover:bg-blue-700 transition-colors",title:"Reply",children:"\u21a9\ufe0f"}),e.sender_id===c.user_id&&(0,Dt.jsxs)(Dt.Fragment,{children:[(0,Dt.jsx)("button",{onClick:()=>{Te(e.message_id),ze(e.content)},className:"bg-yellow-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-xs hover:bg-yellow-700 transition-colors",title:"Edit",children:"\u270f\ufe0f"}),(0,Dt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this message?"))try{await Lt.delete("".concat(It,"/messages/").concat(e),ln())}catch(t){console.error("Error deleting message:",t)}})(e.message_id),className:"bg-red-600 text-white rounded-full w-7 h-7 flex items-center justify-center text-xs hover:bg-red-700 transition-colors",title:"Delete",children:"\ud83d\uddd1\ufe0f"})]})]})]}),(0,Dt.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,Dt.jsxs)("p",{className:"text-xs opacity-75",children:[yn(e.timestamp),e.edited_at&&(0,Dt.jsx)("span",{className:"ml-1",children:"(edited)"}),e.is_encrypted&&(0,Dt.jsx)("span",{className:"ml-1",children:"\ud83d\udd12"})]}),vn(e)]})]})},e.message_id)})),(0,Dt.jsx)("div",{ref:E})]}),(0,Dt.jsxs)("div",{className:"p-6 bg-white/80 backdrop-blur-lg border-t border-gray-200/50",children:[(0,Dt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(x.trim()||Ee)&&g)try{const e={content:x,message_type:"text"};Ee&&(e.reply_to=Ee.message_id),await Lt.post("".concat(It,"/chats/").concat(g.chat_id,"/messages"),e,ln()),w(""),Pe(null)}catch(n){var t;console.error("Error sending message:",n),403===(null===(t=n.response)||void 0===t?void 0:t.status)&&alert("Cannot send message to blocked user")}},className:"flex items-center space-x-3",children:[(0,Dt.jsx)("button",{type:"button",onClick:ge?async()=>{try{const[e,t]=await Bt.stop().getMp3();be(!1);const n=new FileReader;n.onload=async()=>{const e=n.result.split(",")[1];try{await Lt.post("".concat(It,"/chats/").concat(g.chat_id,"/messages"),{content:"Voice message (".concat(ye,"s)"),message_type:"voice",file_data:e,voice_duration:ye,file_name:"voice_message.mp3"},ln())}catch(t){console.error("Error sending voice message:",t)}},n.readAsDataURL(t)}catch(e){console.error("Error stopping recording:",e)}}:async()=>{try{await Bt.start(),be(!0)}catch(e){console.error("Error starting recording:",e),alert("Could not start recording. Please check microphone permissions.")}},className:"p-4 rounded-full transition-all ".concat(ge?"bg-red-500 text-white animate-pulse shadow-lg scale-110":"bg-gradient-to-r from-gray-200 to-gray-300 text-gray-600 hover:from-gray-300 hover:to-gray-400 hover:scale-110"),title:ge?"Recording... ".concat(ye,"s"):"Voice Message",children:(0,Dt.jsx)("span",{className:"text-xl",children:"\ud83c\udfa4"})}),(0,Dt.jsxs)("div",{className:"flex-1 relative",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Type your ultimate message... \ud83d\ude80",className:"w-full p-4 pr-16 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white/80 backdrop-blur-sm shadow-lg transition-all focus:scale-105",value:x,onChange:e=>w(e.target.value),disabled:ge}),(0,Dt.jsxs)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex space-x-2",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>de(!ue),className:"text-gray-400 hover:text-gray-600 text-xl transition-all hover:scale-125",children:"\ud83d\ude0a"}),(0,Dt.jsx)("button",{type:"button",onClick:()=>Tt(!0),className:"text-gray-400 hover:text-gray-600 text-xl transition-all hover:scale-125",children:"\ud83d\udcca"})]})]}),(0,Dt.jsxs)("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 text-white px-8 py-4 rounded-2xl hover:shadow-2xl hover:scale-110 transition-all duration-300 flex items-center space-x-2",disabled:!x.trim()&&!Ee||ge,children:[(0,Dt.jsx)("span",{className:"font-medium",children:"Send"}),(0,Dt.jsx)("span",{className:"text-lg",children:"\ud83d\ude80"})]})]}),ue&&(0,Dt.jsx)("div",{className:"absolute bottom-24 right-8 z-50 shadow-2xl rounded-2xl overflow-hidden",children:(0,Dt.jsx)(EmojiPicker,{onEmojiClick:e=>{w((t=>t+e.emoji)),de(!1)}})})]})]}):(0,Dt.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:(0,Dt.jsxs)("div",{className:"text-center max-w-lg",children:[(0,Dt.jsx)("div",{className:"w-32 h-32 mx-auto mb-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Dt.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Dt.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),(0,Dt.jsx)("h3",{className:"text-3xl font-medium text-gray-900 mb-4",children:"ChatApp Pro"}),(0,Dt.jsx)("p",{className:"text-gray-600 mb-8 text-lg",children:"Select a chat to start messaging"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Dt.jsxs)("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,Dt.jsx)("span",{className:"text-2xl mb-2",children:"\ud83d\udd12"}),(0,Dt.jsx)("span",{className:"font-medium text-gray-700",children:"End-to-end encrypted"})]}),(0,Dt.jsxs)("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,Dt.jsx)("span",{className:"text-2xl mb-2",children:"\ud83d\udcde"}),(0,Dt.jsx)("span",{className:"font-medium text-gray-700",children:"Voice & video calls"})]}),(0,Dt.jsxs)("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,Dt.jsx)("span",{className:"text-2xl mb-2",children:"\ud83d\udcd6"}),(0,Dt.jsx)("span",{className:"font-medium text-gray-700",children:"Stories & status"})]}),(0,Dt.jsxs)("div",{className:"flex flex-col items-center p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[(0,Dt.jsx)("span",{className:"text-2xl mb-2",children:"\ud83e\uddde\u200d\u2642\ufe0f"}),(0,Dt.jsx)("span",{className:"font-medium text-gray-700",children:"AI Assistant"})]})]})]})})}),U&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Contact"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/contacts"),I,ln()),B({email:"",contact_name:""}),M(!1),sn()}catch(r){var t,n;console.error("Error adding contact:",r),alert("Error adding contact: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"email",placeholder:"Contact Email",value:I.email,onChange:e=>B(u(u({},I),{},{email:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("input",{type:"text",placeholder:"Contact Name (optional)",value:I.contact_name,onChange:e=>B(u(u({},I),{},{contact_name:e.target.value})),className:"w-full p-3 border rounded-lg"})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>M(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-blue-500 text-white rounded-lg",children:"Add Contact"})]})]})]})}),V&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Group"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/chats"),{chat_type:"group",name:H.name,description:H.description,members:$},ln()),W({name:"",description:"",members:[],chat_type:"group"}),Q([]),q(!1),on()}catch(r){var t,n;console.error("Error creating group:",r),alert("Error creating group: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Group Name",value:H.name,onChange:e=>W(u(u({},H),{},{name:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("textarea",{placeholder:"Group Description (optional)",value:H.description,onChange:e=>W(u(u({},H),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-20"}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Add Members:"}),(0,Dt.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-lg",children:k.map((e=>{var t;return(0,Dt.jsxs)("div",{className:"flex items-center p-2 hover:bg-gray-50",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:$.includes(e.contact_user_id),onChange:t=>{t.target.checked?Q([...$,e.contact_user_id]):Q($.filter((t=>t!==e.contact_user_id)))},className:"mr-3"}),(0,Dt.jsx)("span",{children:e.contact_name||(null===(t=e.contact_user)||void 0===t?void 0:t.username)})]},e.contact_user_id)}))})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>q(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-purple-500 text-white rounded-lg",children:"Create Group"})]})]})]})}),He&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Channel"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/channels"),$e,ln()),Qe({name:"",description:"",is_public:!0,category:"general"}),We(!1),dn()}catch(r){var t,n;console.error("Error creating channel:",r),alert("Error creating channel: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Channel Name",value:$e.name,onChange:e=>Qe(u(u({},$e),{},{name:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("textarea",{placeholder:"Channel Description",value:$e.description,onChange:e=>Qe(u(u({},$e),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-20"}),(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:$e.is_public,onChange:e=>Qe(u(u({},$e),{},{is_public:e.target.checked})),className:"mr-3"}),(0,Dt.jsx)("label",{children:"Public Channel"})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>We(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-blue-500 text-white rounded-lg",children:"Create Channel"})]})]})]})}),Fe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Story"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/stories"),Ue,ln()),Me({content:"",media_type:"text",background_color:"#000000",text_color:"#ffffff",privacy:"all"}),Ae(!1),un()}catch(r){var t,n;console.error("Error creating story:",r),alert("Error creating story: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("textarea",{placeholder:"What's on your mind?",value:Ue.content,onChange:e=>Me(u(u({},Ue),{},{content:e.target.value})),className:"w-full p-3 border rounded-lg h-32",required:!0}),(0,Dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Dt.jsx)("label",{className:"text-sm",children:"Background:"}),(0,Dt.jsx)("input",{type:"color",value:Ue.background_color,onChange:e=>Me(u(u({},Ue),{},{background_color:e.target.value})),className:"w-12 h-8 border rounded"}),(0,Dt.jsx)("label",{className:"text-sm",children:"Text:"}),(0,Dt.jsx)("input",{type:"color",value:Ue.text_color,onChange:e=>Me(u(u({},Ue),{},{text_color:e.target.value})),className:"w-12 h-8 border rounded"})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>Ae(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-pink-500 text-white rounded-lg",children:"Create Story"})]})]})]})}),Xe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Voice Room"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/voice/rooms"),et,ln()),tt({name:"",description:"",max_participants:50}),Ze(!1)}catch(r){var t,n;console.error("Error creating voice room:",r),alert("Error creating voice room: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Voice Room Name",value:et.name,onChange:e=>tt(u(u({},et),{},{name:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("textarea",{placeholder:"Description (optional)",value:et.description,onChange:e=>tt(u(u({},et),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-20"}),(0,Dt.jsx)("input",{type:"number",placeholder:"Max Participants",value:et.max_participants,onChange:e=>tt(u(u({},et),{},{max_participants:parseInt(e.target.value)})),className:"w-full p-3 border rounded-lg",min:"2",max:"100"})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>Ze(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-orange-500 text-white rounded-lg",children:"Create Voice Room"})]})]})]})}),Rt&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Poll"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g)try{await gn()}catch(t){console.error("Error creating poll:",t)}else alert("Please select a chat first")},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Poll Question",value:Ot.question,onChange:e=>zt(u(u({},Ot),{},{question:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),Ot.options.map(((e,t)=>(0,Dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Option ".concat(t+1),value:e,onChange:e=>{const n=[...Ot.options];n[t]=e.target.value,zt(u(u({},Ot),{},{options:n}))},className:"flex-1 p-3 border rounded-lg",required:!0}),Ot.options.length>2&&(0,Dt.jsx)("button",{type:"button",onClick:()=>{const e=Ot.options.filter(((e,n)=>n!==t));zt(u(u({},Ot),{},{options:e}))},className:"text-red-500",children:"\u2715"})]},t))),(0,Dt.jsx)("button",{type:"button",onClick:()=>zt(u(u({},Ot),{},{options:[...Ot.options,""]})),className:"text-blue-500 text-sm",children:"+ Add Option"}),(0,Dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Dt.jsxs)("label",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:Ot.is_anonymous,onChange:e=>zt(u(u({},Ot),{},{is_anonymous:e.target.checked})),className:"mr-2"}),"Anonymous"]}),(0,Dt.jsxs)("label",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:Ot.allows_multiple_answers,onChange:e=>zt(u(u({},Ot),{},{allows_multiple_answers:e.target.checked})),className:"mr-2"}),"Multiple Answers"]})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>Tt(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-indigo-500 text-white rounded-lg",children:"Create Poll"})]})]})]})}),U&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Contact"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/contacts"),I,ln()),B({email:"",contact_name:""}),M(!1),sn()}catch(r){var t,n;console.error("Error adding contact:",r),alert("Error adding contact: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"email",placeholder:"Contact Email",value:I.email,onChange:e=>B(u(u({},I),{},{email:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("input",{type:"text",placeholder:"Contact Name (optional)",value:I.contact_name,onChange:e=>B(u(u({},I),{},{contact_name:e.target.value})),className:"w-full p-3 border rounded-lg"})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>M(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-blue-500 text-white rounded-lg",children:"Add Contact"})]})]})]})}),V&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Group"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/chats"),{chat_type:"group",name:H.name,description:H.description,members:$},ln()),W({name:"",description:"",members:[],chat_type:"group"}),Q([]),q(!1),on()}catch(r){var t,n;console.error("Error creating group:",r),alert("Error creating group: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Group Name",value:H.name,onChange:e=>W(u(u({},H),{},{name:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("textarea",{placeholder:"Group Description (optional)",value:H.description,onChange:e=>W(u(u({},H),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-20"}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Add Members:"}),(0,Dt.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-lg",children:k.map((e=>{var t;return(0,Dt.jsxs)("div",{className:"flex items-center p-2 hover:bg-gray-50",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:$.includes(e.contact_user_id),onChange:t=>{t.target.checked?Q([...$,e.contact_user_id]):Q($.filter((t=>t!==e.contact_user_id)))},className:"mr-3"}),(0,Dt.jsx)("span",{children:e.contact_name||(null===(t=e.contact_user)||void 0===t?void 0:t.username)})]},e.contact_user_id)}))})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>q(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-purple-500 text-white rounded-lg",children:"Create Group"})]})]})]})}),He&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Channel"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/channels"),$e,ln()),Qe({name:"",description:"",is_public:!0,category:"general"}),We(!1),dn()}catch(r){var t,n;console.error("Error creating channel:",r),alert("Error creating channel: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Channel Name",value:$e.name,onChange:e=>Qe(u(u({},$e),{},{name:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("textarea",{placeholder:"Channel Description",value:$e.description,onChange:e=>Qe(u(u({},$e),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-20"}),(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:$e.is_public,onChange:e=>Qe(u(u({},$e),{},{is_public:e.target.checked})),className:"mr-3"}),(0,Dt.jsx)("label",{children:"Public Channel"})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>We(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-blue-500 text-white rounded-lg",children:"Create Channel"})]})]})]})}),Fe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Story"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/stories"),Ue,ln()),Me({content:"",media_type:"text",background_color:"#000000",text_color:"#ffffff",privacy:"all"}),Ae(!1),un()}catch(r){var t,n;console.error("Error creating story:",r),alert("Error creating story: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("textarea",{placeholder:"What's on your mind?",value:Ue.content,onChange:e=>Me(u(u({},Ue),{},{content:e.target.value})),className:"w-full p-3 border rounded-lg h-32",required:!0}),(0,Dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Dt.jsx)("label",{className:"text-sm",children:"Background:"}),(0,Dt.jsx)("input",{type:"color",value:Ue.background_color,onChange:e=>Me(u(u({},Ue),{},{background_color:e.target.value})),className:"w-12 h-8 border rounded"}),(0,Dt.jsx)("label",{className:"text-sm",children:"Text:"}),(0,Dt.jsx)("input",{type:"color",value:Ue.text_color,onChange:e=>Me(u(u({},Ue),{},{text_color:e.target.value})),className:"w-12 h-8 border rounded"})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>Ae(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-pink-500 text-white rounded-lg",children:"Create Story"})]})]})]})}),Xe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Voice Room"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Lt.post("".concat(It,"/voice/rooms"),et,ln()),tt({name:"",description:"",max_participants:50}),Ze(!1)}catch(r){var t,n;console.error("Error creating voice room:",r),alert("Error creating voice room: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Voice Room Name",value:et.name,onChange:e=>tt(u(u({},et),{},{name:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),(0,Dt.jsx)("textarea",{placeholder:"Description (optional)",value:et.description,onChange:e=>tt(u(u({},et),{},{description:e.target.value})),className:"w-full p-3 border rounded-lg h-20"}),(0,Dt.jsx)("input",{type:"number",placeholder:"Max Participants",value:et.max_participants,onChange:e=>tt(u(u({},et),{},{max_participants:parseInt(e.target.value)})),className:"w-full p-3 border rounded-lg",min:"2",max:"100"})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>Ze(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-orange-500 text-white rounded-lg",children:"Create Voice Room"})]})]})]})}),Rt&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create Poll"}),(0,Dt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g)try{await gn()}catch(t){console.error("Error creating poll:",t)}else alert("Please select a chat first")},children:[(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Poll Question",value:Ot.question,onChange:e=>zt(u(u({},Ot),{},{question:e.target.value})),className:"w-full p-3 border rounded-lg",required:!0}),Ot.options.map(((e,t)=>(0,Dt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Option ".concat(t+1),value:e,onChange:e=>{const n=[...Ot.options];n[t]=e.target.value,zt(u(u({},Ot),{},{options:n}))},className:"flex-1 p-3 border rounded-lg",required:!0}),Ot.options.length>2&&(0,Dt.jsx)("button",{type:"button",onClick:()=>{const e=Ot.options.filter(((e,n)=>n!==t));zt(u(u({},Ot),{},{options:e}))},className:"text-red-500",children:"\u2715"})]},t))),(0,Dt.jsx)("button",{type:"button",onClick:()=>zt(u(u({},Ot),{},{options:[...Ot.options,""]})),className:"text-blue-500 text-sm",children:"+ Add Option"}),(0,Dt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Dt.jsxs)("label",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:Ot.is_anonymous,onChange:e=>zt(u(u({},Ot),{},{is_anonymous:e.target.checked})),className:"mr-2"}),"Anonymous"]}),(0,Dt.jsxs)("label",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"checkbox",checked:Ot.allows_multiple_answers,onChange:e=>zt(u(u({},Ot),{},{allows_multiple_answers:e.target.checked})),className:"mr-2"}),"Multiple Answers"]})]})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>Tt(!1),className:"flex-1 py-2 border rounded-lg",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-indigo-500 text-white rounded-lg",children:"Create Poll"})]})]})]})}),oe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw] max-h-[80vh] overflow-y-auto",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Customize Appearance"}),(0,Dt.jsxs)("div",{className:"space-y-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Family"}),(0,Dt.jsxs)("select",{value:ie.fontFamily,onChange:e=>ce(u(u({},ie),{},{fontFamily:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,Dt.jsx)("option",{value:"Inter",children:"Inter (Default)"}),(0,Dt.jsx)("option",{value:"Arial",children:"Arial"}),(0,Dt.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,Dt.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,Dt.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,Dt.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,Dt.jsx)("option",{value:"Verdana",children:"Verdana"}),(0,Dt.jsx)("option",{value:"Roboto",children:"Roboto"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,Dt.jsxs)("select",{value:ie.fontSize,onChange:e=>ce(u(u({},ie),{},{fontSize:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,Dt.jsx)("option",{value:"small",children:"Small"}),(0,Dt.jsx)("option",{value:"medium",children:"Medium (Default)"}),(0,Dt.jsx)("option",{value:"large",children:"Large"}),(0,Dt.jsx)("option",{value:"xl",children:"Extra Large"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["white","#f5f5f5","#e5e7eb","#d1d5db"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{backgroundColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.backgroundColor===e?"border-green-500":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.backgroundColor,onChange:e=>ce(u(u({},ie),{},{backgroundColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["#25D366","#128C7E","#34B7F1","#7C3AED"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{primaryColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.primaryColor===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.primaryColor,onChange:e=>ce(u(u({},ie),{},{primaryColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["black","#374151","#6B7280","#9CA3AF"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{textColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.textColor===e?"border-green-500":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.textColor,onChange:e=>ce(u(u({},ie),{},{textColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["#128C7E","#25D366","#34B7F1","#E53E3E"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{userNameColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.userNameColor===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.userNameColor,onChange:e=>ce(u(u({},ie),{},{userNameColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{theme:"light"})),className:"p-3 rounded-lg border-2 ".concat("light"===ie.theme?"border-green-500 bg-green-50":"border-gray-300"),children:"\u2600\ufe0f Light"}),(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{theme:"dark"})),className:"p-3 rounded-lg border-2 ".concat("dark"===ie.theme?"border-green-500 bg-green-50":"border-gray-300"),children:"\ud83c\udf19 Dark"})]})]}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("button",{onClick:()=>ce({fontFamily:"Inter",fontSize:"medium",backgroundColor:"white",primaryColor:"#25D366",textColor:"black",userNameColor:"#128C7E",theme:"light"}),className:"w-full p-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Reset to Defaults"})})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{onClick:()=>se(!1),className:"flex-1 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Dt.jsx)("button",{onClick:()=>{const e=document.documentElement;e.style.setProperty("--font-family",ie.fontFamily),e.style.setProperty("--font-size",ie.fontSize),e.style.setProperty("--bg-color",ie.backgroundColor),e.style.setProperty("--primary-color",ie.primaryColor),e.style.setProperty("--text-color",ie.textColor),e.style.setProperty("--username-color",ie.userNameColor),localStorage.setItem("chatapp-custom-settings",JSON.stringify(ie)),se(!1)},className:"flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Apply"})]})]})}),oe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw] max-h-[80vh] overflow-y-auto",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Customize Appearance"}),(0,Dt.jsxs)("div",{className:"space-y-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Family"}),(0,Dt.jsxs)("select",{value:ie.fontFamily,onChange:e=>ce(u(u({},ie),{},{fontFamily:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,Dt.jsx)("option",{value:"Inter",children:"Inter (Default)"}),(0,Dt.jsx)("option",{value:"Arial",children:"Arial"}),(0,Dt.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,Dt.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,Dt.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,Dt.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,Dt.jsx)("option",{value:"Verdana",children:"Verdana"}),(0,Dt.jsx)("option",{value:"Roboto",children:"Roboto"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,Dt.jsxs)("select",{value:ie.fontSize,onChange:e=>ce(u(u({},ie),{},{fontSize:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,Dt.jsx)("option",{value:"small",children:"Small"}),(0,Dt.jsx)("option",{value:"medium",children:"Medium (Default)"}),(0,Dt.jsx)("option",{value:"large",children:"Large"}),(0,Dt.jsx)("option",{value:"xl",children:"Extra Large"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["white","#f5f5f5","#e5e7eb","#d1d5db"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{backgroundColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.backgroundColor===e?"border-green-500":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.backgroundColor,onChange:e=>ce(u(u({},ie),{},{backgroundColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["#25D366","#128C7E","#34B7F1","#7C3AED"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{primaryColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.primaryColor===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.primaryColor,onChange:e=>ce(u(u({},ie),{},{primaryColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["black","#374151","#6B7280","#9CA3AF"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{textColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.textColor===e?"border-green-500":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.textColor,onChange:e=>ce(u(u({},ie),{},{textColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["#128C7E","#25D366","#34B7F1","#E53E3E"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{userNameColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.userNameColor===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.userNameColor,onChange:e=>ce(u(u({},ie),{},{userNameColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{theme:"light"})),className:"p-3 rounded-lg border-2 ".concat("light"===ie.theme?"border-green-500 bg-green-50":"border-gray-300"),children:"\u2600\ufe0f Light"}),(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{theme:"dark"})),className:"p-3 rounded-lg border-2 ".concat("dark"===ie.theme?"border-green-500 bg-green-50":"border-gray-300"),children:"\ud83c\udf19 Dark"})]})]}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("button",{onClick:()=>ce({fontFamily:"Inter",fontSize:"medium",backgroundColor:"white",primaryColor:"#25D366",textColor:"black",userNameColor:"#128C7E",theme:"light"}),className:"w-full p-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Reset to Defaults"})})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{onClick:()=>se(!1),className:"flex-1 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Dt.jsx)("button",{onClick:()=>{const e=document.documentElement;e.style.setProperty("--font-family",ie.fontFamily),e.style.setProperty("--font-size",ie.fontSize),e.style.setProperty("--bg-color",ie.backgroundColor),e.style.setProperty("--primary-color",ie.primaryColor),e.style.setProperty("--text-color",ie.textColor),e.style.setProperty("--username-color",ie.userNameColor),localStorage.setItem("chatapp-custom-settings",JSON.stringify(ie)),se(!1)},className:"flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Apply"})]})]})}),oe&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw] max-h-[80vh] overflow-y-auto",children:[(0,Dt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Customize Appearance"}),(0,Dt.jsxs)("div",{className:"space-y-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Family"}),(0,Dt.jsxs)("select",{value:ie.fontFamily,onChange:e=>ce(u(u({},ie),{},{fontFamily:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,Dt.jsx)("option",{value:"Inter",children:"Inter (Default)"}),(0,Dt.jsx)("option",{value:"Arial",children:"Arial"}),(0,Dt.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,Dt.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,Dt.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,Dt.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,Dt.jsx)("option",{value:"Verdana",children:"Verdana"}),(0,Dt.jsx)("option",{value:"Roboto",children:"Roboto"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,Dt.jsxs)("select",{value:ie.fontSize,onChange:e=>ce(u(u({},ie),{},{fontSize:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,Dt.jsx)("option",{value:"small",children:"Small"}),(0,Dt.jsx)("option",{value:"medium",children:"Medium (Default)"}),(0,Dt.jsx)("option",{value:"large",children:"Large"}),(0,Dt.jsx)("option",{value:"xl",children:"Extra Large"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["white","#f5f5f5","#e5e7eb","#d1d5db"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{backgroundColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.backgroundColor===e?"border-green-500":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.backgroundColor,onChange:e=>ce(u(u({},ie),{},{backgroundColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["#25D366","#128C7E","#34B7F1","#7C3AED"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{primaryColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.primaryColor===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.primaryColor,onChange:e=>ce(u(u({},ie),{},{primaryColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["black","#374151","#6B7280","#9CA3AF"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{textColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.textColor===e?"border-green-500":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.textColor,onChange:e=>ce(u(u({},ie),{},{textColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username Color"}),(0,Dt.jsx)("div",{className:"grid grid-cols-4 gap-2",children:["#128C7E","#25D366","#34B7F1","#E53E3E"].map((e=>(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{userNameColor:e})),className:"w-full h-12 rounded-lg border-2 ".concat(ie.userNameColor===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e}},e)))}),(0,Dt.jsx)("input",{type:"color",value:ie.userNameColor,onChange:e=>ce(u(u({},ie),{},{userNameColor:e.target.value})),className:"w-full mt-2 h-10 border border-gray-300 rounded-lg"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{theme:"light"})),className:"p-3 rounded-lg border-2 ".concat("light"===ie.theme?"border-green-500 bg-green-50":"border-gray-300"),children:"\u2600\ufe0f Light"}),(0,Dt.jsx)("button",{onClick:()=>ce(u(u({},ie),{},{theme:"dark"})),className:"p-3 rounded-lg border-2 ".concat("dark"===ie.theme?"border-green-500 bg-green-50":"border-gray-300"),children:"\ud83c\udf19 Dark"})]})]}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("button",{onClick:()=>ce({fontFamily:"Inter",fontSize:"medium",backgroundColor:"white",primaryColor:"#25D366",textColor:"black",userNameColor:"#128C7E",theme:"light"}),className:"w-full p-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Reset to Defaults"})})]}),(0,Dt.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,Dt.jsx)("button",{onClick:()=>se(!1),className:"flex-1 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Dt.jsx)("button",{onClick:()=>{const e=document.documentElement;e.style.setProperty("--font-family",ie.fontFamily),e.style.setProperty("--font-size",ie.fontSize),e.style.setProperty("--bg-color",ie.backgroundColor),e.style.setProperty("--primary-color",ie.primaryColor),e.style.setProperty("--text-color",ie.textColor),e.style.setProperty("--username-color",ie.userNameColor),localStorage.setItem("chatapp-custom-settings",JSON.stringify(ie)),se(!1)},className:"flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Apply"})]})]})}),c&&(0,Dt.jsx)(Ut,{user:c,token:f,onAction:async e=>{try{switch(e.type){case"create_chat":if(e.target_user){const t=await Lt.get("".concat(It,"/users/search?query=").concat(e.target_user),ln()),n=t.data.find((t=>{var n;return t.username.toLowerCase().includes(e.target_user.toLowerCase())||(null===(n=t.display_name)||void 0===n?void 0:n.toLowerCase().includes(e.target_user.toLowerCase()))||t.email.toLowerCase().includes(e.target_user.toLowerCase())}));if(n){const e=await Lt.post("".concat(It,"/chats"),{chat_type:"direct",other_user_id:n.user_id},ln());return on(),b(e.data),{success:!0,message:"Chat created with ".concat(n.username,"!")}}return{success:!1,message:"Couldn't find user: ".concat(e.target_user)}}break;case"create_group":const t=await Lt.post("".concat(It,"/chats"),{chat_type:"group",name:e.name,members:[]},ln());return on(),b(t.data),{success:!0,message:'Group "'.concat(e.name,'" created!')};case"add_contact":await Lt.post("".concat(It,"/contacts"),{email:e.contact_info,contact_name:e.contact_info.split("@")[0]},ln());return sn(),{success:!0,message:"Contact added: ".concat(e.contact_info)};case"send_message":if(e.recipient&&e.message){const t=await Lt.get("".concat(It,"/users/search?query=").concat(e.recipient),ln()),n=t.data.find((t=>{var n;return t.username.toLowerCase().includes(e.recipient.toLowerCase())||(null===(n=t.display_name)||void 0===n?void 0:n.toLowerCase().includes(e.recipient.toLowerCase()))}));if(n){const t=await Lt.post("".concat(It,"/chats"),{chat_type:"direct",other_user_id:n.user_id},ln());return await Lt.post("".concat(It,"/chats/").concat(t.data.chat_id,"/messages"),{content:e.message,message_type:"text"},ln()),on(),{success:!0,message:"Message sent to ".concat(n.username,"!")}}}break;case"block_user":if(e.target_user){const t=await Lt.get("".concat(It,"/users/search?query=").concat(e.target_user),ln()),n=t.data.find((t=>{var n;return t.username.toLowerCase().includes(e.target_user.toLowerCase())||(null===(n=t.display_name)||void 0===n?void 0:n.toLowerCase().includes(e.target_user.toLowerCase()))}));if(n)return await Lt.post("".concat(It,"/users/").concat(n.user_id,"/block"),{},ln()),cn(),{success:!0,message:"User ".concat(n.username," blocked!")}}break;case"list_chats":return on(),{success:!0,message:"Your chats are now displayed!"};case"list_contacts":return sn(),{success:!0,message:"Your contacts are now displayed!"};case"show_help":return{success:!0,message:"Here are the magical commands I understand:\n\u2022 Create chat with [name]\n\u2022 Add contact [email]\n\u2022 Send message to [name] saying [message]\n\u2022 Block user [name]\n\u2022 Show my chats/contacts\n\u2022 Create group called [name]\n\u2022 Create story [content]"};case"show_settings":return{success:!0,message:"Settings portal is now accessible through the app interface!"};default:return{success:!1,message:"Unknown action type"}}}catch(r){var t,n;return console.error("Genie action error:",r),{success:!1,message:"Error: ".concat((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message)}}return{success:!1,message:"Action could not be completed"}}})]})};l.createRoot(document.getElementById("root")).render((0,Dt.jsx)(a.StrictMode,{children:(0,Dt.jsx)(Vt,{})}))})();
//# sourceMappingURL=main.f57bfca9.js.map